import { ImageResponse } from "next/og";

export const runtime = "edge";

export default async function OG(req: { url: string | URL }) {
  const { searchParams } = new URL(req.url);

  // ?title=<title>
  const hasTitle = searchParams.has("title");
  const title = hasTitle
    ? searchParams.get("title")?.slice(0, 100)
    : "Fancy Notes";

  return new ImageResponse(
    <div
      style={{
        height: "100%",
        width: "100%",
        display: "flex",
        flexDirection: "column",
        alignItems: "center",
        justifyContent: "center",
        backgroundColor: "#fff",
        fontSize: 40,
        fontWeight: 600,
      }}
    >
      <svg
        aria-hidden="true"
        width="200"
        viewBox="0 0 500 500"
        fill="#000"
        style={{ margin: "0 75px" }}
      >
        <path d="m385.42 326.45c7.5002 11.979 14.799 23.656 22.202 35.5-8.1935 5.0413-16.606 4.262-24.579 4.2893-37.649 0.12912-75.301-0.41928-112.95-0.33032-23.302 0.055023-46.602 0.98456-69.905 1.2102-18.151 0.17575-36.306-0.15396-54.46-0.21256-14.984-0.04837-29.969 0.065522-44.951-0.081878-6.7307-0.066223-7.8922-1.4271-4.9177-7.4055 6.1438-12.349 12.832-24.436 19.572-36.476 6.175-11.03 12.936-21.733 19.035-32.803 7.134-12.949 13.653-26.236 20.755-39.204 13.59-24.818 27.295-49.574 41.159-74.24 10.441-18.576 21.402-36.862 31.75-55.488 6.0504-10.891 11.318-22.216 17.019-33.303 1.1251-2.1883 2.622-4.1855 4.8904-7.7543 5.7382 9.557 11.258 17.968 16.005 26.795 18.521 34.436 36.581 69.122 55.249 103.48 10.482 19.291 22.071 37.979 32.702 57.193 10.704 19.346 20.84 39.008 31.426 58.833m-147.65-196.09c-6.8811 12.731-13.765 25.46-20.643 38.193-26.635 49.31-53.288 98.611-79.886 147.94-5.3618 9.9441-10.83 19.852-15.653 30.058-3.1228 6.6081-2.2816 7.4296 4.9122 7.4871 25.804 0.20612 51.609 0.60953 77.412 0.4834 25.964-0.12695 51.924-1.0068 77.888-1.1692 26.313-0.16449 52.629 0.23712 78.943 0.1875 7.2331-0.013611 14.465-0.75507 22.485-1.2069-1.2543-2.8544-1.9446-4.8765-2.9768-6.7055-12.26-21.723-24.719-43.336-36.793-65.161-4.5791-8.277-7.9431-17.224-12.489-25.522-11.912-21.741-24.535-43.098-36.183-64.977-10.707-20.111-20.396-40.762-30.776-61.05-3.9071-7.6365-8.4975-14.923-12.776-22.37-0.55866 0.038421-1.1173 0.076835-1.6759 0.11526-3.8183 7.6772-7.6366 15.354-11.787 23.696z" />
        <path d="m225.1 291.91c-1.6356-3.1e-5 -2.8994 0.28671-3.9451-0.068634-1.493-0.50739-3.5675-1.1808-4.0422-2.3378-0.60886-1.484-0.52339-3.9944 0.38878-5.2343 4.2394-5.7626 9.1434-11.044 13.267-16.881 3.1425-4.4477 6.4169-6.9789 12.279-4.0055v21.656c2.279 0.15097 4.193 0.27777 6.0605 0.40149 1.3418 5.7549 1.0544 6.1013-5.3554 6.7429-3.8485 4.8808 4.2317 4.6031 3.5826 8.5007h-20.87c0.3517-4.5121 8.8479-2.2303 6.2637-8.7733h-7.6303m3.7686-6.0166c1.3887-0.10904 2.7774-0.21808 3.7849-0.29718v-11.418c-2.9601 4.3854-5.2821 7.8253-7.9156 11.727 1.6734 0 2.4826 0 4.1308-0.012238z" />
        <path d="m279.98 285.16c2.0652 0.14368 3.6948 0.14368 5.3178 0.14368 1.7896 5.8358-1.0354 7.2611-5.957 6.5522v4.3891c1.4268 1.0446 2.9593 2.1665 4.4917 3.2884-0.23108 0.36005-0.46219 0.72012-0.69327 1.0802h-20.718c0.54193-4.3939 8.8558-2.2182 6.2835-8.7031-3.8832 0-7.8742 0.17319-11.835-0.096772-1.3314-0.090728-3.3237-1.0383-3.7032-2.0744-0.57408-1.5672-0.6989-4.0794 0.20068-5.2777 5.2959-7.0544 10.67-14.098 16.655-20.555 1.615-1.7427 5.4395-1.4379 9.5222-2.3605 0 8.6894 0 16.08 0.43567 23.615m-10.962-2.7256v-7.1547c-0.32431-0.064179-0.64862-0.12836-0.97296-0.19254-2.3341 3.451-4.6682 6.902-7.0024 10.353 2.9108-0.79971 6.9207 3.0047 7.9753-3.0058z" />
      </svg>
      <div id="title">{title}</div>
    </div>,
  );
}
